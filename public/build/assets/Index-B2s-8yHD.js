import{o as g,j as k,k as w,b as e,q as o,E as p,J as c,e as r,c as u,z as f,x as i,r as m,I as y,n as h}from"./app-sYwY5Q9E.js";import{_ as N}from"./DisplayLayout-BWhLaTvW.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const _={class:"h-full w-full flex flex-col items-center justify-center bg-[#f8f9fa] overflow-hidden p-4"},M={class:"w-full max-w-xl bg-white border-4 border-[#ffc107] rounded-[25px] px-8 py-6 shadow-2xl relative flex flex-col justify-center"},A={class:"flex flex-col gap-5"},T={class:"pt-2 mt-1"},V=["disabled"],C={key:0,class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},I={key:1,class:"text-lg tracking-wider"},P={key:2,class:"text-lg tracking-wider animate-pulse"},j={key:0,class:"fixed inset-0 bg-[#00569c]/90 z-[60] flex items-center justify-center flex-col backdrop-blur-md"},B={key:1,class:"print-only hidden"},R={class:"ticket-container"},z={class:"date"},S={class:"big-number"},E={class:"service-name"},K={class:"guest-info"},L={__name:"Index",props:{services:Array},setup(b){const x=b,l=m(!1),n=m(null),s=m({service_id:"",guest_name:"",identity_number:"",phone_number:"",purpose:""});g(()=>{x.services&&x.services.length>0&&(s.value.service_id=x.services[0].id)});const v=async()=>{if(!s.value.guest_name||!s.value.identity_number){alert("Mohon lengkapi Nama dan NRP/Identitas.");return}l.value=!0;try{const d=await y.post("/kiosk/ticket",{guest_name:s.value.guest_name,identity_number:s.value.identity_number,phone_number:s.value.phone_number,purpose:s.value.purpose});n.value=d.data,await h(),setTimeout(()=>{window.print(),setTimeout(()=>{s.value.guest_name="",s.value.identity_number="",s.value.phone_number="",s.value.purpose="",n.value=null,l.value=!1},500)},300)}catch(d){console.error(d),alert("Terjadi kesalahan sistem."),l.value=!1}};return(d,t)=>(r(),k(N,{title:"Pendaftaran Mandiri"},{default:w(()=>[e("div",_,[t[10]||(t[10]=e("div",{class:"text-center mb-6 shrink-0"},[e("h1",{class:"text-3xl font-black text-[#00569c] uppercase tracking-wide"},"PENDAFTARAN MANDIRI"),e("p",{class:"text-sm text-gray-500 font-bold"},"Silakan isi data diri Anda di bawah ini")],-1)),e("div",M,[t[9]||(t[9]=e("h2",{class:"text-center text-[#00569c] font-black text-lg mb-4 uppercase tracking-wider border-b-2 border-gray-100 pb-2"}," FORMULIR TAMU ",-1)),e("div",A,[e("div",null,[t[4]||(t[4]=e("label",{class:"flex items-center gap-2 text-xs font-bold text-[#00569c] mb-1 uppercase tracking-wide"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2.5",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})]),o(" Nama Lengkap ")],-1)),p(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>s.value.guest_name=a),type:"text",placeholder:"Ketik nama lengkap...",class:"w-full bg-gray-50 border-2 border-gray-200 rounded-xl p-3 text-gray-800 focus:ring-2 focus:ring-[#00569c]/20 focus:border-[#00569c] focus:outline-none font-bold transition-all text-sm"},null,512),[[c,s.value.guest_name]])]),e("div",null,[t[5]||(t[5]=e("label",{class:"flex items-center gap-2 text-xs font-bold text-[#00569c] mb-1 uppercase tracking-wide"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2.5",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})]),o(" NRP / NIP / Identitas ")],-1)),p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>s.value.identity_number=a),type:"text",placeholder:"Ketik Nomor Identitas...",class:"w-full bg-gray-50 border-2 border-gray-200 rounded-xl p-3 text-gray-800 focus:ring-2 focus:ring-[#00569c]/20 focus:border-[#00569c] focus:outline-none font-bold transition-all text-sm"},null,512),[[c,s.value.identity_number]])]),e("div",null,[t[6]||(t[6]=e("label",{class:"flex items-center gap-2 text-xs font-bold text-[#00569c] mb-1 uppercase tracking-wide"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2.5",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})]),o(" Nomor Telepon ")],-1)),p(e("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>s.value.phone_number=a),type:"text",placeholder:"08xx-xxxx-xxxx",class:"w-full bg-gray-50 border-2 border-gray-200 rounded-xl p-3 text-gray-800 focus:ring-2 focus:ring-[#00569c]/20 focus:border-[#00569c] focus:outline-none font-bold transition-all text-sm"},null,512),[[c,s.value.phone_number]])]),e("div",null,[t[7]||(t[7]=e("label",{class:"flex items-center gap-2 text-xs font-bold text-[#00569c] mb-1 uppercase tracking-wide"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2.5",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),o(" Keperluan ")],-1)),p(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>s.value.purpose=a),type:"text",placeholder:"Contoh: Pengurusan Pensiun",class:"w-full bg-gray-50 border-2 border-gray-200 rounded-xl p-3 text-gray-800 focus:ring-2 focus:ring-[#00569c]/20 focus:border-[#00569c] focus:outline-none font-bold transition-all text-sm"},null,512),[[c,s.value.purpose]])]),e("div",T,[e("button",{onClick:v,disabled:l.value,class:"w-full bg-[#ffc107] hover:bg-yellow-400 text-[#00569c] font-black py-3.5 rounded-xl shadow-md hover:shadow-lg transition-all transform active:scale-[0.98] flex items-center justify-center gap-3 border-b-4 border-yellow-600 active:border-b-0 active:translate-y-1"},[l.value?f("",!0):(r(),u("svg",C,[...t[8]||(t[8]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2.5",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"},null,-1)])])),l.value?(r(),u("span",P,"SEDANG MEMPROSES...")):(r(),u("span",I,"CETAK TIKET ANTRIAN"))],8,V)])])]),t[11]||(t[11]=e("div",{class:"mt-4 text-[#00569c] font-bold opacity-60 text-s shrink-0"}," *Pastikan data yang diisi sesuai dengan kartu identitas ",-1))]),l.value?(r(),u("div",j,[...t[12]||(t[12]=[e("div",{class:"animate-spin text-7xl mb-6 text-[#ffc107]"},"‚è≥",-1),e("p",{class:"text-3xl font-black text-white tracking-widest uppercase"},"Sedang Mencetak Tiket...",-1),e("p",{class:"text-white mt-4 font-bold"},"Silakan ambil struk Anda di mesin printer",-1)])])):f("",!0),n.value?(r(),u("div",B,[e("div",R,[t[16]||(t[16]=e("h2",{class:"instansi"},"PT ASABRI KC MALANG",-1)),e("p",z,i(n.value.date),1),t[17]||(t[17]=e("hr",{class:"dashed"},null,-1)),t[18]||(t[18]=e("p",{class:"label"},"Nomor Antrian:",-1)),e("h1",S,i(n.value.ticket.ticket_code),1),e("p",E,i(n.value.service_name),1),t[19]||(t[19]=e("hr",{class:"dashed"},null,-1)),e("div",K,[e("p",null,[t[13]||(t[13]=e("strong",null,"Nama:",-1)),o(" "+i(n.value.ticket.guest_name),1)]),e("p",null,[t[14]||(t[14]=e("strong",null,"NRP:",-1)),o(" "+i(n.value.ticket.identity_number),1)]),e("p",null,[t[15]||(t[15]=e("strong",null,"Perihal:",-1)),o(" "+i(n.value.ticket.purpose),1)])]),t[20]||(t[20]=e("hr",{class:"dashed"},null,-1)),t[21]||(t[21]=e("p",{class:"footer-note"},"Simpan struk ini hingga dipanggil.",-1)),t[22]||(t[22]=e("p",{class:"footer-note"},"Terima Kasih.",-1))])])):f("",!0)]),_:1}))}};export{L as default};
